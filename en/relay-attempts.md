title=Relay attempts
uuid=613a8612-21f3-4e56-a5b6-ad63787395c4
PROCESSOR=cmark-gfm --unsafe -e footnotes -e table -e strikethrough -e tasklist --strikethrough-double-tilde
intro=These are spammers (or hackers) trying to send email <b>from</b> my server
tags=logs
created=2021-10-01

But this is impossible, because it's [configured properly][conf].
All failed attempts (since logging started) are listed below.
<p id="stat"></p>

[conf]: http://www.postfix.org/SMTPD_ACCESS_README.html

<div>
<style>
td,th {white-space: pre;}
/*
table { background-color: white; }
@media (prefers-color-scheme: dark) {
    table { background-color: black; }
}
*/
</style>
</div>

<div>
<!-- how to negate parent's margin:auto: https://stackoverflow.com/a/69381861 -->
<div style="width: 100vw;margin-left: calc( (-100vw + 80ex ) /2);">
<table style="margin: auto">
	<!--# include virtual="/logshow/relay-attempts.sh" -->
<tr><td colspan=5 style="text-align:left">This line marks switch from live list (above) to stored data (below)</td></tr>
	<!--# include file="relay-attempts.htm" -->
</table>
</div>
</div>

This list was generated by [this][sc] simple script:

	awk '/Relay access denied/{gsub("shpakovsky", "$(hostname)"); gsub("<", "\\&lt;"); gsub(">", "\\&gt;"); gsub("^unknown", "", $10); print "<tr><td>" $1 " " $2 "</td><td>" $10 "</td><td>" $17 "</td><td>" $18 "</td><td>" $20 "</td></tr>"}' /postfix-logs/mail.log

Where mail.log taken from [postfix][pf].

[sc]: https://github.com/Lex-2008/containers/blob/master/logshow.cont/data/html/realy-attempts.sh
[pf]: https://github.com/Lex-2008/containers/blob/master/postfix.cont/data/conf/main.cf#:~:text=maillog_file%20%3D%20/data/logs/-,mail.log,-maillog_file_prefixes%3D/data/logs

<script>
document.body.onload=function(){
	t=window.performance.timing;
	tt=document.getElementsByTagName('table')[0];
	document.getElementById('stat').innerHTML='Total <b>'+
		((tt.childNodes.length==2?tt.lastChild:tt).childNodes.length-1)+
		'</b> entries listed. Page received in <b>'+
		(t.responseEnd-t.requestStart)+  '</b>ms, plus <b>'+
		(t.domComplete-t.navigationStart-(t.responseEnd-t.requestStart))+
		'</b>ms overhead (reported by your browser).';
}
</script>
