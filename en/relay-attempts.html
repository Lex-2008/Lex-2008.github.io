<!doctype html><html lang="en"><head>
<meta charset="utf-8">
<link rel="stylesheet" href="../style2.css">
<title>Relay attempts</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="These are spammers (or hackers) trying to send email <b>from</b> my server">
<link rel="canonical" href="http://alexey.shpakovsky.ru/en/relay-attempts.html">
</head><body>
<div id="menu">
	<ul>
		<li><a href="../ru/">Русский</a></li>
		<li><a href="../en/">English</a></li>
		<li><a href="../photos/en.html">Photos</a></li>
		<li><a href="../private/">Private</a></li>
	</ul>
</div>
<div id="wrap">
	<div id="header">
		<h1><a href="http://alexey.shpakovsky.ru/en/">Notes</a></h1>
		<p>Notes about different stuff</p>
	</div>
	<div id="content">
		<!-- put contents below -->
		<!-- begin relay-attempts -->
		<div class="post">
			<h2><a href="relay-attempts.html" class="title">Relay attempts</a></h2>
			<p class="trivia">
				Created: 2021-10-01 &mdash; modified: 2021-10-02 &mdash; tags: e-mail
			</p>
			<p class="intro">These are spammers (or hackers) trying to send email <b>from</b> my server</p>
			<p>But this is impossible, because it's <a href="http://www.postfix.org/SMTPD_ACCESS_README.html">configured properly</a>.
All failed attempts (since logging started) are listed below.</p>

<p id="stat"></p>

<div>
<style>
td,th {white-space: pre;}
table { background-color: white; }
@media (prefers-color-scheme: dark) {
    table { background-color: black; }
}
</style>
</div>

<table>
    <!--# include virtual="/logshow/relay-attempts.sh" -->
<tr><td colspan=5 style="text-align:left">This line marks switch from live list (above) to stored data (below)</td></tr>
    <!--# include file="relay-attempts.htm" -->
</table>

<p>This list was generated by <a href="https://github.com/Lex-2008/containers/blob/master/logshow.cont/data/html/realy-attempts.sh">this</a> simple script:</p>

<pre><code>awk '/Relay access denied/{gsub("shpakovsky", "$(hostname)"); gsub("&lt;", "\\&amp;lt;"); gsub("&gt;", "\\&amp;gt;"); gsub("^unknown", "", $10); print "&lt;tr&gt;&lt;td&gt;" $1 " " $2 "&lt;/td&gt;&lt;td&gt;" $10 "&lt;/td&gt;&lt;td&gt;" $17 "&lt;/td&gt;&lt;td&gt;" $18 "&lt;/td&gt;&lt;td&gt;" $20 "&lt;/td&gt;&lt;/tr&gt;"}' /postfix-logs/mail.log
</code></pre>

<p>Where mail.log taken from <a href="https://github.com/Lex-2008/containers/blob/master/postfix.cont/data/conf/main.cf#:~:text=maillog_file%20%3D%20/data/logs/-,mail.log,-maillog_file_prefixes%3D/data/logs">postfix</a>.</p>

<script>
document.body.onload=function(){
    t=window.performance.timing;
    tt=document.getElementsByTagName('table')[0];
    document.getElementById('stat').innerHTML='Total <b>'+
        ((tt.childNodes.length==2?tt.lastChild:tt).childNodes.length-1)+
        '</b> entries listed. Page received in <b>'+
        (t.responseEnd-t.requestStart)+  '</b>ms, plus <b>'+
        (t.domComplete-t.navigationStart-(t.responseEnd-t.requestStart))+
        '</b>ms overhead (reported by your browser).';
}
</script>
		</div>
		<!-- end relay-attempts -->
	</div>
	<div id="footer">
		<a href="http://creativecommons.org/licenses/by/4.0/" title="Creative Commons Attribution">CC BY</a>
		<a href="/">Alexey Shpakovsky</a> &mdash; <a id="email"
			href="javascript:(l=document.getElementById('email')).href='mailto:'+(l.innerHTML=location.hostname.replace('.','@'));void 0">
			(click to see e-mail)</a>
	</div>
</div>
</body></html>
